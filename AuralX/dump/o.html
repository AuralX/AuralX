<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Audiobook Player</title>

<style>
body { margin:0; background:#111; color:#fff; font-family: sans-serif; padding-bottom:110px; }

/* Chapter List */
.chapter{
  padding:12px; border-bottom:1px solid #222; cursor:pointer;
}
.chapter.active{ background:#222; }

/* Floating Player */
#playerBar{
  position:fixed; bottom:-110px; left:0; width:100%;
  background:#1a1a1a; padding:12px;
  transition:bottom .35s ease;
  box-shadow:0 -3px 10px rgba(0,0,0,.4);
}

.player-top{ display:flex; justify-content:space-between; font-size:14px; margin-bottom:8px; }

.controls{ display:flex; justify-content:center; align-items:center; gap:18px; margin:8px 0; }
.controls button{
  background:none; border:none; color:#ff4b4b;
  font-size:20px; cursor:pointer;
}

input[type="range"]{
  width:100%; height:4px; background:#444; border-radius:3px;
}

.time-line{ display:flex; justify-content:space-between; font-size:12px; margin-top:4px; color:#bbb; }

.speed-btn{ text-align:center; margin-top:6px; color:#ff4b4b; cursor:pointer; font-size:14px; }
</style>
</head>

<body>

<h2 style="padding:15px;">üìñ Audiobook</h2>

<!-- Episode List -->
<div class="chapter" data-src="audio/ep1.mp3" data-index="0">Episode 1</div>
<div class="chapter" data-src="audio/ep2.mp3" data-index="1">Episode 2</div>
<div class="chapter" data-src="audio/ep3.mp3" data-index="2">Episode 3</div>

<!-- Floating Player -->
<div id="playerBar">
  <div class="player-top">
    <span id="epInfo">Episode 1 / 3</span>
    <span id="closeBtn" style="cursor:pointer;">‚úñ</span>
  </div>

  <input type="range" id="seekBar" value="0">

  <div class="time-line">
    <span id="currentTime">0:00</span>
    <span id="duration">0:00</span>
  </div>

  <div class="controls">
    <button id="prevBtn">‚èÆ</button>
    <button id="rew10">‚Ü∫10</button>
    <button id="playPause">‚èµ</button>
    <button id="fwd10">10‚Üª</button>
    <button id="nextBtn">‚è≠</button>
  </div>

  <div class="speed-btn" id="speedBtn">1x</div>

  <audio id="player"></audio>
</div>

<script>
let player = document.getElementById("player");
let chapters = document.querySelectorAll(".chapter");
let epInfo = document.getElementById("epInfo");
let seekBar = document.getElementById("seekBar");
let playPause = document.getElementById("playPause");
let speedBtn = document.getElementById("speedBtn");
let timeNow = document.getElementById("currentTime");
let timeTotal = document.getElementById("duration");
let bar = document.getElementById("playerBar");
let current = 0;

function format(t){
  let m = Math.floor(t/60), s = Math.floor(t%60);
  return m+":"+(s<10?"0"+s:s);
}

function playEpisode(i){
  current=i;
  chapters.forEach(c=>c.classList.remove("active"));
  chapters[i].classList.add("active");
  player.src = chapters[i].getAttribute("data-src");
  epInfo.innerText=`Episode ${i+1} / ${chapters.length}`;
  player.play();
}

chapters.forEach(ch=>{
  ch.onclick = ()=> playEpisode(parseInt(ch.getAttribute("data-index")));
});

player.onplay = ()=>{ bar.style.bottom="0"; playPause.innerText="‚è∏"; };
player.onpause = ()=>{ bar.style.bottom="-110px"; playPause.innerText="‚èµ"; };

playPause.onclick = ()=>{
  if(player.paused) player.play(); else player.pause();
};

document.getElementById("prevBtn").onclick = ()=>{ if(current>0) playEpisode(current-1); };
document.getElementById("nextBtn").onclick = ()=>{ if(current<chapters.length-1) playEpisode(current+1); };

document.getElementById("rew10").onclick = ()=> player.currentTime -= 10;
document.getElementById("fwd10").onclick = ()=> player.currentTime += 10;

speedBtn.onclick = ()=>{
  let speeds=[1,1.5,2]; 
  let idx = speeds.indexOf(player.playbackRate);
  idx = (idx+1) % speeds.length;
  player.playbackRate = speeds[idx];
  speedBtn.innerText = speeds[idx]+"x";
};

player.ontimeupdate = ()=>{
  seekBar.value = player.currentTime / player.duration * 100;
  timeNow.innerText = format(player.currentTime);
  timeTotal.innerText = format(player.duration);
};

seekBar.oninput = ()=> player.currentTime = seekBar.value * player.duration / 100;

document.getElementById("closeBtn").onclick = ()=> bar.style.display="none";
</script>

</body>
</html>
